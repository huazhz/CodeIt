<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>new-brain test drive</title>
	<link rel="stylesheet" href="//ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css" />
	<style>
body { background: silver; }
body .container { background: white; }
	</style>
</head>
<body>
	<div class="container">
		<h3>new-brain test drive</h3>
		<form class="input form-horizontal">
			<div class="form-group">
				<label class="control-label col-sm-2">URL</label>
				<div class="col-sm-10">
					<span class="input-group">
						<span class="input-group-addon">/api/</span>
						<select class="url form-control">
							<option value="">-</option>
							<optgroup label="user">
								<option value="user/register" data-url="username=a&password=1&email=alphaone@a1.com&avatar=1">注册</option>
								<option value="user/login" data-url="username=a&password=1">登入</option>
								<option value="user/login" data-url="username=o&password=oo">登入失败</option>
								<option value="user/logout" data-url="">登出</option>
								<!-- <option value="" data-url=""></option> -->
							</optgroup>
						</select>
					</span>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2">data</label>
				<div class="col-sm-10">
					<textarea class="data form-control"></textarea>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2">data</label>
				<div class="col-sm-10">
					<textarea class="response form-control"></textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-2"></div>
				<div class="col-sm-5">
					<input type="submit" class="btn btn-lg submit" />
				</div>
				<div class="col-sm-5">
					<input type="reset" class="btn btn-lg reset" />
				</div>
			</div>
		</form>
	</div>
<script src="//ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.0.min.js"></script>
<script defer="defer" src="//ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js"></script>
<script defer="defer">
$(function () {
	var $form = $("form"),
		$url = $(".form-control.url"),
		$data = $(".form-control.data"),
		$resp = $(".form-control.response");
	$url.change(function(e) {
		var $selected = $url.find(":selected");
		$data.val($selected.data("url"));
	});
	$form.submit(function(e) {
		e.stopPropagation();
		e.preventDefault();
		var url = $url.val(),
			data = $data.val();
			$resp.val(null);
		//console.log(e, url, data);
		if (!url) return;
		$.ajax("/api/" + url, {
			method: "post",
			data: data,
			dataType: "text"
		}).then(function(d) {
			//console.log(arguments);
			$resp.val(d);
		})
	});
});
	</script>
</body>
</html>
